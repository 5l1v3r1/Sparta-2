<!doctype html>
<html>
  <head>
    <title>{{ .ServiceName }}</title>

    <style>
      {{ .BootstrapCSS }}
    </style>

  	<style>
  	{{ .MermaidCSS }}
  	</style>

    <style>
      {{ .HighlightsCSS }}
    </style>

    <style>
      body {
        padding-top: 50px;
        margin-bottom: 60px;
        background-color: #F5F5F5;
      }

      .spartaLayout {
        font-family: "-apple-system", Menlo, Arial, Helvetica, sans-serif;
      }
    </style>
  	<script>
  	{{ .MermaidJS}}

  	mermaid.initialize({startOnLoad:true,
  										htmlLabels: true,
  									  flowchart:{
  									     useMaxWidth: true
  									  }
  										});


  	</script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script charset="UTF-8">

     {{ .JQueryJS }}

    </script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script>

      {{ .BootstrapJS }}

    </script>

    <script>

      {{ .HighlightsJS }}

    </script>

    <script>
    var SERVICE_NAME = "{{ .ServiceName }}";
    var TEMPLATE_DATA = null;
    try {
      TEMPLATE_DATA = JSON.parse({{ .CloudFormationTemplate }});
    }
    catch (e)
    {
      console.log('Failed to parse template: ' + e.toString());
      TEMPLATE_DATA = {
        ERROR: e.toString()
      };
    }
    $( document ).ready(function() {
        $("#rawTemplateContent").text(JSON.stringify(TEMPLATE_DATA, null, ' '));
        hljs.initHighlightingOnLoad();
    });
    </script>
  </head>
  <body>

    <div>
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">{{ .ServiceName }}</a>
          </div>
          <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="#lambda" aria-controls="lambda" role="tab" data-toggle="tab">Lambdas</a></li>
              <li><a href="#apigateway" aria-controls="apigateway" role="tab" data-toggle="tab">API Gateway</a></li>
              <li><a href="#cloudformationTemplate" aria-controls="cloudformationTemplate" role="tab" data-toggle="tab">Template</a></li>
            </ul>
            <div id="navbar" class="navbar-collapse collapse">
              <form class="navbar-form navbar-right">
                Sparta version: {{.SpartaVersion}}
                <button type="submit" class="btn btn-info" onclick="window.open('https://github.com/mweagle/Sparta','_blank','resizable=yes')">Sparta Home</button>
              </form>
           </div>
          </div>
        </div>
      </nav>

      <div class="tab-content container-fluid">
        <div role="tabpanel" class="tab-pane active" id="lambda">
          <div class="mermaid spartaLayout" id="mermaidGraph">
        		%% Example code
        		graph LR

            {{ .MermaidData}}
        	</div>
        </div>
        <div role="tabpanel" class="tab-pane" id="apigateway">
          <div class="jumbotron">
            <h1>API Gateway</h1>
            <p>Coming Soon!</p>
          </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="cloudformationTemplate">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">CloudFormation Template</h3>
            </div>
            <pre>
              <code class="JSON" id="rawTemplateContent">
              </code>
            </pre>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
