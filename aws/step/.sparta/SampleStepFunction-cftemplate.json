{"AWSTemplateFormatVersion":"2010-09-09","Resources":{"IAMRole60b1388dc55bc6969e22da3f803b3f9ecdd42274":{"Type":"AWS::IAM::Role","Properties":{"AssumeRolePolicyDocument":{"Statement":[{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]}},{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["ec2.amazonaws.com"]}},{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["apigateway.amazonaws.com"]}}],"Version":"2012-10-17"},"Policies":[{"PolicyDocument":{"Statement":[{"Effect":"Allow","Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Resource":{"Fn::Join":["",["arn:aws:logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},"*"]]}},{"Effect":"Allow","Action":["cloudwatch:PutMetricData"],"Resource":"*"},{"Effect":"Allow","Action":["cloudformation:DescribeStacks","cloudformation:DescribeStackResource"],"Resource":{"Fn::Join":["",["arn:aws:cloudformation:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":stack/",{"Ref":"AWS::StackName"},"/*"]]}},{"Effect":"Allow","Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Resource":"*"}],"Version":"2012-10-17"},"PolicyName":"LambdaPolicy"}]}},"StateMachine59f153f18068faa0b7fb588350be79df422ba5ef":{"Type":"AWS::StepFunctions::StateMachine","Properties":{"DefinitionString":{"Fn::Join":["",["{\"StartAt\":\"lambdaHelloWorld\",\"States\":{\"holdUpNow\":{\"Next\":\"success\",\"Seconds\":3,\"Type\":\"Wait\"},\"lambdaHelloWorld\":{\"Next\":\"holdUpNow\",\"Resource\":\"",{"Fn::GetAtt":["stephelloWorldLambdab27557b4c1a33b2d802318f92b916b52dec82703","Arn"]},"\",\"Type\":\"Task\"},\"success\":{\"Type\":\"Succeed\"}}}"]]},"RoleArn":{"Fn::GetAtt":["StatesIAMRolee00aa3484b0397c676887af695abfd160104318a","Arn"]},"StateMachineName":"SampleStepFunction"}},"StatesIAMRolee00aa3484b0397c676887af695abfd160104318a":{"Type":"AWS::IAM::Role","Properties":{"AssumeRolePolicyDocument":{"Statement":[{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":{"Fn::Join":[".",["states",{"Ref":"AWS::Region"},"amazonaws.com"]]}}}],"Version":"2012-10-17"},"Policies":[{"PolicyDocument":{"Statement":[{"Effect":"Allow","Action":["lambda:InvokeFunction"],"Resource":{"Fn::GetAtt":["stephelloWorldLambdab27557b4c1a33b2d802318f92b916b52dec82703","Arn"]}}],"Version":"2012-10-17"},"PolicyName":"StatesExecutionPolicy"}]}},"stephelloWorldLambdab27557b4c1a33b2d802318f92b916b52dec82703":{"Type":"AWS::Lambda::Function","DependsOn":["IAMRole60b1388dc55bc6969e22da3f803b3f9ecdd42274"],"Metadata":{"aws:cloudformation:logical-id":"stephelloWorldLambdab27557b4c1a33b2d802318f92b916b52dec82703","aws:cloudformation:stack-id":{"Ref":"AWS::StackId"},"aws:cloudformation:stack-name":{"Ref":"AWS::StackName"},"golangFunc":"step_helloWorld","sparta:cloudformation:region":{"Ref":"AWS::Region"}},"Properties":{"Code":{"S3Bucket":"weagle","S3Key":"SampleStepFunction/SampleStepFunction-code-acdec6db76edd952ef40d259709e290ac159728f.zip"},"Description":"SampleStepFunction: step_helloWorld","Environment":{"Variables":{}},"FunctionName":{"Fn::Join":["-",[{"Ref":"AWS::StackName"},"step_helloWorld"]]},"Handler":"index.step_helloWorld","MemorySize":128,"Role":{"Fn::GetAtt":["IAMRole60b1388dc55bc6969e22da3f803b3f9ecdd42274","Arn"]},"Runtime":"nodejs6.10","Timeout":3}}}}