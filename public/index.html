<!DOCTYPE html>
<html>
  <head>
    <title>Sparta Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.42.2" />
<title> :: Sparta Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70794971-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70794971-2');
</script>

<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png">
<meta name="description" content="">



<style>
  article section.page code {
      font-family:  monospace; }
</style>

    
  </head>
  <body data-url="/">
    
      <header>
  <div class="logo">
    
	
  
    <p><img src="/images/SpartaLogoNoDomain.png" alt="Sparta" title="Sparta" /></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="/credits"  rel="noopener">
                  <i class='fa fa-bullhorn'></i> <label>Credits</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/mweagle/Sparta"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/overview/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/overview/">Overview</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sample_service/" class="dd-item haschildren
        ">
      <div>
      <a href="/sample_service/">Sample Service</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sample_service/step1/" class="dd-item">
        <div>
          <a href="/sample_service/step1/">
            Overview
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sample_service/step2/" class="dd-item">
        <div>
          <a href="/sample_service/step2/">
            Details
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/reference/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/reference/">Reference</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/reference/eventsources/" class="dd-item haschildren
        ">
      <div>
      <a href="/reference/eventsources/">Event Sources</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/reference/eventsources/cloudformation/" class="dd-item">
        <div>
          <a href="/reference/eventsources/cloudformation/">
            CloudFormation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/cloudwatchevents/" class="dd-item">
        <div>
          <a href="/reference/eventsources/cloudwatchevents/">
            CloudWatch Events
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/cloudwatchlogs/" class="dd-item">
        <div>
          <a href="/reference/eventsources/cloudwatchlogs/">
            CloudWatch Logs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/cognito/" class="dd-item">
        <div>
          <a href="/reference/eventsources/cognito/">
            Cognito
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/dynamodb/" class="dd-item">
        <div>
          <a href="/reference/eventsources/dynamodb/">
            DynamoDB
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/kinesis/" class="dd-item">
        <div>
          <a href="/reference/eventsources/kinesis/">
            Event Sources - Kinesis
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/s3/" class="dd-item">
        <div>
          <a href="/reference/eventsources/s3/">
            S3
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/ses/" class="dd-item">
        <div>
          <a href="/reference/eventsources/ses/">
            SES
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/sns/" class="dd-item">
        <div>
          <a href="/reference/eventsources/sns/">
            SNS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/eventsources/sqs/" class="dd-item">
        <div>
          <a href="/reference/eventsources/sqs/">
            SQS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/reference/apigateway/" class="dd-item haschildren
        ">
      <div>
      <a href="/reference/apigateway/">API Gateway</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/reference/apigateway/echo_event/" class="dd-item">
        <div>
          <a href="/reference/apigateway/echo_event/">
            Echo Event
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/apigateway/user_input/" class="dd-item">
        <div>
          <a href="/reference/apigateway/user_input/">
            User Input
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/apigateway/context/" class="dd-item">
        <div>
          <a href="/reference/apigateway/context/">
            Request Context
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/apigateway/cors/" class="dd-item">
        <div>
          <a href="/reference/apigateway/cors/">
            CORS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/apigateway/slack/" class="dd-item">
        <div>
          <a href="/reference/apigateway/slack/">
            Slack SlashCommand
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/reference/application/" class="dd-item haschildren
        ">
      <div>
      <a href="/reference/application/">Application Customization</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/reference/application/commandline/" class="dd-item">
        <div>
          <a href="/reference/application/commandline/">
            Command Line Options
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/application/custom_commands/" class="dd-item">
        <div>
          <a href="/reference/application/custom_commands/">
            Custom Application Commands
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/application/custom_flags/" class="dd-item">
        <div>
          <a href="/reference/application/custom_flags/">
            Custom Flags
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/application/environments/" class="dd-item">
        <div>
          <a href="/reference/application/environments/">
            Managing Environments
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/application/workflow_hooks/" class="dd-item">
        <div>
          <a href="/reference/application/workflow_hooks/">
            Workflow Hooks
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/reference/cicd/" class="dd-item">
        <div>
          <a href="/reference/cicd/">
            CI/CD
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/custom_resources/" class="dd-item">
        <div>
          <a href="/reference/custom_resources/">
            Custom Resources
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/deployment_strategies/" class="dd-item">
        <div>
          <a href="/reference/deployment_strategies/">
            Deployment Strategies
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/discovery/" class="dd-item">
        <div>
          <a href="/reference/discovery/">
            Discovery Service
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/docker/" class="dd-item">
        <div>
          <a href="/reference/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/dynamic_infrastructure/" class="dd-item">
        <div>
          <a href="/reference/dynamic_infrastructure/">
            Dynamic Infrastructure
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/hybrid_topologies/" class="dd-item">
        <div>
          <a href="/reference/hybrid_topologies/">
            Hybrid Topologies
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/local_testing/" class="dd-item">
        <div>
          <a href="/reference/local_testing/">
            Local Testing
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/profiling/" class="dd-item">
        <div>
          <a href="/reference/profiling/">
            Profiling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/s3site/" class="dd-item">
        <div>
          <a href="/reference/s3site/">
            S3 Sites with CORS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/step_functions/" class="dd-item">
        <div>
          <a href="/reference/step_functions/">
            Step Functions
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/limitations/" class="dd-item">
        <div>
          <a href="/reference/limitations/">
            Limitations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/reference/faq/" class="dd-item">
        <div>
          <a href="/reference/faq/">
            FAQ
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/presentations/" class="dd-item
        ">
      <div>
      <a href="/presentations/">Presentations</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/credits/" class="dd-item
        ">
      <div>
      <a href="/credits/">Credits</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/meta/" class="dd-item
        ">
      <div>
      <a href="/meta/">_meta</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/overview/" >
   Overview</option> 
  
    <option value="/sample_service/" >
   Sample Service</option>
    <option value="/reference/" >
   Reference</option> 
    <option value="/reference/eventsources/" >
  - 
   Event Sources</option>
    <option value="/reference/apigateway/" >
  - 
   API Gateway</option>
    <option value="/reference/application/" >
  - 
   Application Customization</option>
      <option value="/reference/cicd/" >- CI/CD</option>
      <option value="/reference/custom_resources/" >- Custom Resources</option>
      <option value="/reference/deployment_strategies/" >- Deployment Strategies</option>
      <option value="/reference/discovery/" >- Discovery Service</option>
      <option value="/reference/docker/" >- Docker</option>
      <option value="/reference/dynamic_infrastructure/" >- Dynamic Infrastructure</option>
      <option value="/reference/hybrid_topologies/" >- Hybrid Topologies</option>
      <option value="/reference/local_testing/" >- Local Testing</option>
      <option value="/reference/profiling/" >- Profiling</option>
      <option value="/reference/s3site/" >- S3 Sites with CORS</option>
      <option value="/reference/step_functions/" >- Step Functions</option>
      <option value="/reference/limitations/" >- Limitations</option>
      <option value="/reference/faq/" >- FAQ</option>
  
    <option value="/presentations/" >
   Presentations</option>
    <option value="/credits/" >
   Credits</option>
    <option value="/meta/" >
   _meta</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    
    
    
    
<span id="sidebar-toggle-span">
<a href="#" id="sidebar-toggle" data-sidebar-toggle=""><i class="fa fa-bars"></i> navigation</a>
</span>
 


<p><br />
<table style="width:90%">
  <!-- Row 1 -->
  <tr>
    <td style="width:50%">
      <img src="/images/SpartaLogoNoDomain.png" alt="Sparta shield" height="128" />
    </td>
    <td style="width:50%">
      <h1>
Self-deploying <i>go</i> microservices for <a href="https://aws.amazon.com/lambda">AWS Lambda</a>
</h2>
    </h1>
  </tr>
</table></p>

<p>Sparta is a framework that transforms a standard go application into a self-deploying AWS Lambda powered service. All configuration and infrastructure requirements are expressed as go types - no JSON or YAML needed!</p>

<h1 id="sample-application">Sample Application</h1>

<h2 id="1-define">1. Define</h2>

<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8f5902;font-style:italic">// File: application.go
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
  <span style="color:#000">sparta</span> <span style="color:#4e9a06">&#34;github.com/mweagle/Sparta&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#8f5902;font-style:italic">////////////////////////////////////////////////////////////////////////////////
</span><span style="color:#8f5902;font-style:italic">// Hello world event handler
</span><span style="color:#8f5902;font-style:italic">//
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">helloWorld</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;Hello World 🌏&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">nil</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">////////////////////////////////////////////////////////////////////////////////
</span><span style="color:#8f5902;font-style:italic">// Main
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">lambdaFunctions</span> <span style="color:#000;font-weight:bold">[]</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">sparta</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LambdaAWSInfo</span>
  <span style="color:#000">lambdaFn</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">sparta</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HandleAWSLambda</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Hello world test&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">helloWorld</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">sparta</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">IAMRoleDefinition</span><span style="color:#000;font-weight:bold">{})</span>
  <span style="color:#000">lambdaFunctions</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">lambdaFunctions</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">lambdaFn</span><span style="color:#000;font-weight:bold">)</span>

  <span style="color:#8f5902;font-style:italic">// Delegate to Sparta
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">sparta</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Main</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SpartaHelloWorld&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#4e9a06">&#34;Simple Sparta application that creates a single AWS Lambda function&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">lambdaFunctions</span><span style="color:#000;font-weight:bold">,</span>
                <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">,</span>
                <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>

<h2 id="2-deploy">2. Deploy</h2>

<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go run main.go provision --s3Bucket MY_S3_BUCKET
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ════════════════════════════════════════════════
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ╔═╗┌─┐┌─┐┬─┐┌┬┐┌─┐   Version : <span style="color:#0000cf;font-weight:bold">1</span>.1.1
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ╚═╗├─┘├─┤├┬┘ │ ├─┤   SHA     : beb5700
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ╚═╝┴  ┴ ┴┴└─ ┴ ┴ ┴   Go      : go1.10
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ════════════════════════════════════════════════
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Service: SpartaHelloWorld                          <span style="color:#000">LinkFlags</span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Option</span><span style="color:#ce5c00;font-weight:bold">=</span>provision <span style="color:#000">UTC</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">2018</span>-05-25T04:36:50Z
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ════════════════════════════════════════════════
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Using <span style="color:#4e9a06">`</span>git<span style="color:#4e9a06">`</span> SHA <span style="color:#204a87;font-weight:bold">for</span> StampedBuildID                 <span style="color:#000">Command</span><span style="color:#ce5c00;font-weight:bold">=</span>git rev-parse HEAD <span style="color:#000">SHA</span><span style="color:#ce5c00;font-weight:bold">=</span>7ee3e1bc52f15c4a636e05061eaec7b748db22a9
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Provisioning service                               <span style="color:#000">BuildID</span><span style="color:#ce5c00;font-weight:bold">=</span>7ee3e1bc52f15c4a636e05061eaec7b748db22a9 <span style="color:#000">CodePipelineTrigger</span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">InPlaceUpdates</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#000">NOOP</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#000">Tags</span><span style="color:#ce5c00;font-weight:bold">=</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Verifying IAM Lambda execution roles
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO IAM roles verified                                 <span style="color:#000">Count</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Checking S3 versioning                             <span style="color:#000">Bucket</span><span style="color:#ce5c00;font-weight:bold">=</span>MY_S3_BUCKET <span style="color:#000">VersioningEnabled</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Checking S3 region                                 <span style="color:#000">Bucket</span><span style="color:#ce5c00;font-weight:bold">=</span>MY_S3_BUCKET <span style="color:#000">Region</span><span style="color:#ce5c00;font-weight:bold">=</span>us-west-2
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Running <span style="color:#4e9a06">`</span>go generate<span style="color:#4e9a06">`</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0000</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Compiling binary                                   <span style="color:#000">Name</span><span style="color:#ce5c00;font-weight:bold">=</span>Sparta.lambda.amd64
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0001</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Creating code ZIP archive <span style="color:#204a87;font-weight:bold">for</span> upload               <span style="color:#000">TempName</span><span style="color:#ce5c00;font-weight:bold">=</span>./.sparta/SpartaHelloWorld-code.zip
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0001</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Lambda code archive size                           <span style="color:#000">Size</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">13</span> MB
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0001</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Uploading <span style="color:#204a87">local</span> file to S3                         <span style="color:#000">Bucket</span><span style="color:#ce5c00;font-weight:bold">=</span>MY_S3_BUCKET <span style="color:#000">Key</span><span style="color:#ce5c00;font-weight:bold">=</span>SpartaHelloWorld/SpartaHelloWorld-code.zip <span style="color:#000">Path</span><span style="color:#ce5c00;font-weight:bold">=</span>./.sparta/SpartaHelloWorld-code.zip <span style="color:#000">Size</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">13</span> MB
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0011</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Uploading <span style="color:#204a87">local</span> file to S3                         <span style="color:#000">Bucket</span><span style="color:#ce5c00;font-weight:bold">=</span>MY_S3_BUCKET <span style="color:#000">Key</span><span style="color:#ce5c00;font-weight:bold">=</span>SpartaHelloWorld/SpartaHelloWorld-cftemplate.json <span style="color:#000">Path</span><span style="color:#ce5c00;font-weight:bold">=</span>./.sparta/SpartaHelloWorld-cftemplate.json <span style="color:#000">Size</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">2</span>.2 kB
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0011</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Creating stack                                     <span style="color:#000">StackID</span><span style="color:#ce5c00;font-weight:bold">=</span>arn:aws:cloudformation:us-west-2:123412341234:stack/SpartaHelloWorld/44b426d0-5fd5-11e8-90cd-503f20f2ad82
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO CloudFormation Metrics ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO     Operation duration                             <span style="color:#000">Duration</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">24</span>.49s <span style="color:#000">Resource</span><span style="color:#ce5c00;font-weight:bold">=</span>SpartaHelloWorld <span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>AWS::CloudFormation::Stack
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO     Operation duration                             <span style="color:#000">Duration</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">15</span>.02s <span style="color:#000">Resource</span><span style="color:#ce5c00;font-weight:bold">=</span>IAMRolebc3b888fab1664f42799785a6d9a3bb76ea63798 <span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>AWS::IAM::Role
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO     Operation duration                             <span style="color:#000">Duration</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">2</span>.90s <span style="color:#000">Resource</span><span style="color:#ce5c00;font-weight:bold">=</span>HelloworldtestLambdaa4a9e95c84255c65c284ce95dd7d3c45776c1a68 <span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>AWS::Lambda::Function
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Stack provisioned                                  <span style="color:#000">CreationTime</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">2018</span>-05-25 <span style="color:#0000cf;font-weight:bold">04</span>:37:02.099 +0000 UTC <span style="color:#000">StackId</span><span style="color:#ce5c00;font-weight:bold">=</span>arn:aws:cloudformation:us-west-2:123412341234:stack/SpartaHelloWorld/44b426d0-5fd5-11e8-90cd-503f20f2ad82 <span style="color:#000">StackName</span><span style="color:#ce5c00;font-weight:bold">=</span>SpartaHelloWorld
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ════════════════════════════════════════════════
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO SpartaHelloWorld Summary
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO ════════════════════════════════════════════════
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Verifying IAM roles                                Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">0</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Verifying AWS preconditions                        Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">0</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Creating code bundle                               Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">1</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Uploading code                                     Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">10</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Ensuring CloudFormation stack                      Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">28</span>
<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0039</span><span style="color:#ce5c00;font-weight:bold">]</span>  INFO Total elapsed <span style="color:#204a87">time</span>                                 Duration <span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)=</span><span style="color:#0000cf;font-weight:bold">39</span></code></pre></div>

<h2 id="3-invoke">3. Invoke</h2>

<p><img src="/images/invoke.jpg" alt="Console GUI" title="Invoke" /></p>

<hr />

<h1 id="features">Features</h1>

<table style="width:90%">
  <!-- Row 1 -->
  <tr>
    <td style="width:50%">
      <h2>Unified</h2>
      <p>Use a <b>go</b> monorepo to define and your microservice's:
      <ul>
        <li>Application logic</li>
        <li>AWS infrastructure</li>
        <li>Operational metrics</li>
        <li>Alert conditions</li>
        <li>Security policies</li>
      </ul>
    </td>
    <td style="width:50%">
      <h2>Complete AWS Ecosystem</h2>
      <p>Sparta enables your lambda-based service to seamlessly integrate with the entire set of AWS lambda <a href="http://docs.aws.amazon.com/lambda/latest/dg/intro-core-components.html">event sources</a> such as:
        <ul>
          <li>DynamoDB</li>
          <li>S3</li>
          <li>Kinesis</li>
          <li>SNS</li>
          <li>SES</li>
          <li>CloudWatch Events</li>
          <li>CloudWatch Logs</li>
        </ul>
        Additionally, your service may provision any other <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html">CloudFormation</a> supported resource and even your own <a href="http://gosparta.io/docs/custom_resources">CustomResources</a>.
        </p>
    </td>
  </tr>
  <!-- Row 2 -->
  <tr>
    <td style="width:50%">
      <h2>Security</h2>
      <p>Define <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html">IAM Roles</a> with limited privileges to minimize your service's attack surface.  Both string literal and ARN expressions are supported in order to reference dynamically created resources.  Sparta treats <a href="http://searchsecurity.techtarget.com/definition/principle-of-least-privilege-POLP">POLA</a> and <a href="https://twitter.com/hashtag/secops">#SecOps</a> as first-class goals.
      </p>
    </td>
    <td style="width:50%">
      <h2>Discovery</h2>
      <p>A service may provision dynamic AWS infrastructure, and <a href="http://gosparta.io/docs/eventsources">discover</a>, at lambda execution time, the dependent resources' AWS-assigned outputs (<code>Ref</code> &amp; <code>Fn::Att</code>).  Eliminate hardcoded <i>Magic ARNs</i> from your codebase and move towards <a href="http://chadfowler.com/2013/06/23/immutable-deployments.html">immutable infrastructure</a></p>
    </td>
  </tr>
  <!-- Row 3 -->
  <tr>
    <td style="width:50%">
      <h2>API Gateway</h2>
      <p>Make your service HTTPS accessible by binding it to an <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html">API Gateway</a> REST API during provisioning.  As part of API Gateway creation, Sparta includes <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html">API Gateway Mapping Templates</a> with all request data, including user-defined whitelisted parameters, so that you can focus on your core application logic.</p>
    </td>
    <td style="width:50%">
      <h2>Static Sites</h2>
      <p>Include a <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html">CORS-enabled</a> <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html">S3-backed site</a> with your service.  S3-backed sites include API Gateway discovery information for turnkey deployment.</p>
    </td>
  </tr>
</table>

<hr />

<p><a href="https://cloudcraft.co/view/8571b3bc-76ef-48c1-8401-0b6ae1d36b4e?key=d44zi4j1pxj00000" rel="Sparta Arch"><img src="/images/sparta_overview.png" alt="Sparta Overview" /></a></p>

<p>Sparta relies on <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">CloudFormation</a> to deploy and update your application.  For resources that CloudFormation does not yet support, it uses <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-lambda.html">Lambda-backed Custom Resources</a> so that all service updates support both update and rollback semantics.  Sparta&rsquo;s automatically generated CloudFormation resources use content-based logical IDs whenever possible to preserve <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html">service availability</a> and minimize resource churn during updates.</p>

<h1 id="getting-started">Getting Started</h1>

<p>To get started using Sparta, begin with the <a href="/overview">Overview</a>.</p>

<h1 id="administration">Administration</h1>

<ul>
<li>Problems?  Please open an <a href="https://github.com/mweagle/Sparta/issues/new">issue</a> in GitHub.</li>
</ul>

<p><br />
<img src="/images/GopherInclusion.png" alt="Eveyone Welcome" height="256">
<center>
<h6>Courtesy of <a href="https://github.com/ashleymcnamara/gophers">gophers</a>
</h6>
</center>
<br /></p>

<h1 id="questions">Questions?</h1>

<p>Get in touch via:</p>

<ul>
<li><i class="fa fa-twitter">&nbsp; @mweagle</i></li>
<li><i class="fa fa-slack">&nbsp; Gophers: <a href="https://gophers.slack.com/team/mweagle">@mweagle</a></i>

<ul>
<li><a href="https://invite.slack.golangbridge.org/">Signup page</a></li>
</ul></li>
<li><i class="fa fa-slack">&nbsp; Serverless: <a href="https://serverless-forum.slack.com/team/mweagle">@mweagle</a></i>

<ul>
<li><a href="https://wt-serverless-seattle.run.webtask.io/serverless-forum-signup?webtask_no_cache=1">Signup page</a></li>
</ul></li>
</ul>

<h2 id="related-projects">Related Projects</h2>

<ul>
<li><a href="https://github.com/mweagle/go-cloudcondenser">go-cloudcondensor</a>

<ul>
<li>Define AWS CloudFormation templates in <code>go</code></li>
</ul></li>
<li><a href="https://github.com/mweagle/go-cloudformation">go-cloudformation</a>

<ul>
<li><code>go</code> types for CloudFormation resources</li>
</ul></li>
<li><a href="https://github.com/mweagle/ssm-cache">ssm-cache</a>

<ul>
<li>Lightweight cache for <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html">Systems Manager Paramter Store</a> values</li>
</ul></li>
</ul>

<h2 id="other-resources">Other resources</h2>

<ul>
<li><a href="https://medium.com/@mweagle/go-aws-lambda-building-an-html-website-with-api-gateway-and-lambda-for-go-using-sparta-5e6fe79f63ef">Build an S3 website with API Gateway and AWS Lambda for Go using Sparta</a></li>
<li><a href="https://aws.amazon.com/blogs/compute/announcing-go-support-for-aws-lambda/">AWS blog post announcing Go support</a></li>
<li><a href="https://medium.com/@mweagle/a-go-framework-for-aws-lambda-ab14f0c42cb#.6gtlwe5vg">Sparta - A Go framework for AWS Lambda</a></li>
<li>Other libraries &amp; frameworks:

<ul>
<li><a href="https://github.com/serverless/serverless">Serverless</a></li>
<li><a href="https://github.com/braahyan/PAWS">PAWS</a></li>
<li><a href="http://apex.run">Apex</a></li>
<li><a href="https://github.com/jasonmoo/lambda_proc">lambda_proc</a></li>
<li><a href="https://github.com/xlab/go-lambda">go-lambda</a></li>
<li><a href="https://github.com/pilwon/go-lambda">go-lambda (GRPC)</a></li>
</ul></li>
<li>Supported AWS Lambda <a href="http://docs.aws.amazon.com/lambda/latest/dg/programming-model-v2.html">programming models</a></li>
<li><a href="https://serverlesscode.com">Serverless Code Blog</a></li>
<li><a href="https://d0.awsstatic.com/whitepapers/AWS_Serverless_Multi-Tier_Architectures.pdf">AWS Serverless Multi-Tier Architectures Whitepaper</a></li>
<li><a href="http://docs.aws.amazon.com/lambda/latest/dg/limits.html">Lambda limits</a></li>
<li><a href="https://aws.amazon.com/blogs/compute/the-twelve-days-of-lambda/">The Twelve Days of Lambda</a></li>
<li><a href="http://cloudcraft.co">CloudCraft</a> is a great tool for AWS architecture diagrams</li>
</ul>




    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-next" href="/overview/" title="Overview" style="margin-right: 0px;"><label>Overview</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 08/03/2016
    </div>
    

    <div class="github-link">
      <a href="https://github.com/mweagle/Sparta/tree/docs/content/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>